{"version":3,"file":"CopyTooltip.js","sourceRoot":"","sources":["../../../../src/components/Tooltip/CopyTooltip.tsx"],"names":[],"mappings":"AAAA,YAAY,CAAA;;AAEZ,OAAO,EAAE,OAAO,IAAI,YAAY,EAAE,MAAM,UAAU,CAAA;AAClD,OAAO,EAAE,MAAM,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAA;AACxC,OAAO,EAAE,QAAQ,EAAE,MAAM,2BAA2B,CAAA;AACpD,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,SAAS,CAAA;AACrC,OAAO,EAAE,OAAO,EAAE,MAAM,WAAW,CAAA;AAiCnC,MAAM,CAAC,MAAM,WAAW,GAAG,CAAC,EAC1B,QAAQ,EACR,SAAS,EACT,SAAS,GAAG,GAAG,EACf,KAAK,GAAG,QAAQ,EAChB,WAAW,GAAG,CAAC,EACf,IAAI,GAAG,KAAK,EACZ,UAAU,GAAG,CAAC,GACG,EAAE,EAAE;IACrB,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,GAAG,QAAQ,CAAU,KAAK,CAAC,CAAA;IAChD,MAAM,CAAC,MAAM,EAAE,SAAS,CAAC,GAAG,QAAQ,CAAU,KAAK,CAAC,CAAA;IACpD,MAAM,cAAc,GAAG,MAAM,CAAgC,SAAS,CAAC,CAAA;IAEvE,MAAM,IAAI,GAAG,GAAG,EAAE;QAChB,SAAS,CAAC,IAAI,CAAC,CAAA;QAEf,qEAAqE;QACrE,oCAAoC;QACpC,QAAQ,CAAC,SAAS,CAAC,CAAA;QAEnB,oDAAoD;QACpD,cAAc,CAAC,OAAO,GAAG,UAAU,CAAC,GAAG,EAAE;YACvC,OAAO,CAAC,KAAK,CAAC,CAAA;QAChB,CAAC,EAAE,IAAI,CAAC,CAAA;IACV,CAAC,CAAA;IAED,MAAM,gBAAgB,GAAG,CAAC,SAAkB,EAAE,EAAE;QAC9C,0DAA0D;QAC1D,IAAI,SAAS,EAAE,CAAC;YACd,YAAY,CAAC,cAAc,CAAC,OAAO,CAAC,CAAA;YACpC,SAAS,CAAC,KAAK,CAAC,CAAA;QAClB,CAAC;QAED,OAAO,CAAC,SAAS,CAAC,CAAA;IACpB,CAAC,CAAA;IAED,OAAO,CACL,MAAC,OAAO,CAAC,IAAI,IACX,IAAI,EAAE,IAAI,EACV,YAAY,EAAE,gBAAgB,EAC9B,aAAa,EAAE,SAAS,EACxB,uBAAuB,EAAE,KAAK,aAE9B,KAAC,OAAO,CAAC,OAAO,IACd,aAAa,EAAE,CAAC,GAAG,EAAE,EAAE;oBACrB,yCAAyC;oBACzC,GAAG,CAAC,cAAc,EAAE,CAAA;oBACpB,GAAG,CAAC,eAAe,EAAE,CAAA;oBAErB,iBAAiB;oBACjB,IAAI,EAAE,CAAA;gBACR,CAAC;gBACD,iEAAiE;gBACjE,OAAO,EAAE,CAAC,GAAG,EAAE,EAAE;oBACf,GAAG,CAAC,cAAc,EAAE,CAAA;oBACpB,GAAG,CAAC,eAAe,EAAE,CAAA;gBACvB,CAAC,YAEA,QAAQ,GACO,EAClB,KAAC,OAAO,CAAC,OAAO,IACd,OAAO,QACP,SAAS,EAAE,CAAC,MAAM,EAClB,KAAK,EAAE,KAAK,EACZ,WAAW,EAAE,WAAW,EACxB,IAAI,EAAE,IAAI,EACV,UAAU,EAAE,UAAU,EACtB,gBAAgB,EAAE,EAAE,EACpB,eAAe,EAAE,GAAG,EAAE,CAAC,OAAO,CAAC,KAAK,CAAC,EACrC,aAAa,EAAE,IAAI,YAElB,MAAM,CAAC,CAAC,CAAC;gBACR,2FAA2F;gBAC3F,eAAK,SAAS,EAAC,2BAA2B,aACxC,KAAC,KAAK,KAAG,gBACL,CACP,CAAC,CAAC,CAAC,CACF,eAAK,SAAS,EAAC,yBAAyB,aACtC,KAAC,IAAI,KAAG,aACJ,CACP,GACe,IACL,CAChB,CAAA;AACH,CAAC,CAAA","sourcesContent":["\"use client\"\n\nimport { Tooltip as RadixTooltip } from \"radix-ui\"\nimport { useRef, useState } from \"react\"\nimport { copyText } from \"../../lib/copyToClipboard\"\nimport { Check, Copy } from \"../Icon\"\nimport { Tooltip } from \"./Tooltip\"\n\nexport type CopyTooltipProps = {\n  children: React.ReactNode\n  /** Value to copy to the clipboard */\n  copyValue: string\n  /**\n   * Delay of when the tooltip is shown from first interaction, in milliseconds.\n   * @default 150\n   */\n  openDelay?: number\n  /**\n   * The preferred alignment against the trigger. May change when collisions occur.\n   * @default center\n   */\n  align?: RadixTooltip.TooltipContentProps[\"align\"]\n  /**\n   * An offset in pixels from the \"start\" or \"end\" alignment options.\n   * @default 0\n   */\n  alignOffset?: RadixTooltip.TooltipContentProps[\"alignOffset\"]\n  /**\n   * The preferred side of the trigger to render against when open. Will be reversed when collisions occur.\n   * @default top\n   */\n  side?: RadixTooltip.TooltipContentProps[\"side\"]\n  /**\n   * The distance in pixels from the trigger.\n   * @default 5\n   */\n  sideOffset?: RadixTooltip.TooltipContentProps[\"sideOffset\"]\n}\n\nexport const CopyTooltip = ({\n  children,\n  copyValue,\n  openDelay = 150,\n  align = \"center\",\n  alignOffset = 0,\n  side = \"top\",\n  sideOffset = 5,\n}: CopyTooltipProps) => {\n  const [open, setOpen] = useState<boolean>(false)\n  const [copied, setCopied] = useState<boolean>(false)\n  const copiedTimerRef = useRef<ReturnType<typeof setTimeout>>(undefined)\n\n  const copy = () => {\n    setCopied(true)\n\n    // Not currently revealing the slight async nature of this operation,\n    // nor indicating the failure state.\n    copyText(copyValue)\n\n    // Persist the copied state for a second, then close\n    copiedTimerRef.current = setTimeout(() => {\n      setOpen(false)\n    }, 1000)\n  }\n\n  const handleOpenChange = (nextState: boolean) => {\n    // When opening, ensure timer and copied state are cleared\n    if (nextState) {\n      clearTimeout(copiedTimerRef.current)\n      setCopied(false)\n    }\n\n    setOpen(nextState)\n  }\n\n  return (\n    <Tooltip.Root\n      open={open}\n      onOpenChange={handleOpenChange}\n      delayDuration={openDelay}\n      disableHoverableContent={false}\n    >\n      <Tooltip.Trigger\n        onPointerDown={(evt) => {\n          // Prevent tooltip listeners from closing\n          evt.preventDefault()\n          evt.stopPropagation()\n\n          // Copy the value\n          copy()\n        }}\n        // Prevent default behavior of closing on click from this handler\n        onClick={(evt) => {\n          evt.preventDefault()\n          evt.stopPropagation()\n        }}\n      >\n        {children}\n      </Tooltip.Trigger>\n      <Tooltip.Content\n        compact\n        clickable={!copied}\n        align={align}\n        alignOffset={alignOffset}\n        side={side}\n        sideOffset={sideOffset}\n        collisionPadding={15}\n        onEscapeKeyDown={() => setOpen(false)}\n        onPointerDown={copy}\n      >\n        {copied ? (\n          // The <Check /> SVG canvas whitespace is larger than copy, so we use a smaller flexbox gap\n          <div className=\"flex items-center gap-0.5\">\n            <Check /> Copied!\n          </div>\n        ) : (\n          <div className=\"flex items-center gap-1\">\n            <Copy /> Copy\n          </div>\n        )}\n      </Tooltip.Content>\n    </Tooltip.Root>\n  )\n}\n"]}