{"version":3,"file":"CopyButton.js","sourceRoot":"","sources":["../../../../src/components/Button/CopyButton.tsx"],"names":[],"mappings":"AAAA,YAAY,CAAA;;AAEZ,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE,QAAQ,EAAmB,MAAM,OAAO,CAAA;AACpE,OAAO,EAAE,eAAe,EAAyB,MAAM,2BAA2B,CAAA;AAClF,OAAO,EAAE,KAAK,EAAE,IAAI,EAAE,MAAM,SAAS,CAAA;AACrC,OAAO,EAAE,OAAO,EAAE,MAAM,eAAe,CAAA;AACvC,OAAO,EAAE,MAAM,EAAoB,MAAM,UAAU,CAAA;AAOnD,MAAM,CAAC,MAAM,UAAU,GAAG,CAAC,EAAE,QAAQ,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,SAAS,EAAmB,EAAE,EAAE;IAC5F,MAAM,CAAC,MAAM,EAAE,SAAS,CAAC,GAAG,QAAQ,CAAU,KAAK,CAAC,CAAA;IACpD,MAAM,aAAa,GAAG,MAAM,CAAgB,IAAI,CAAC,CAAA;IAEjD,MAAM,WAAW,GAAG,CAAC,GAAkC,EAAE,EAAE;QACzD,4BAA4B;QAC5B,IAAI,MAAM,EAAE,CAAC;YACX,OAAM;QACR,CAAC;QAED,SAAS,CAAC,IAAI,CAAC,CAAA;QACf,OAAO,EAAE,CAAC,GAAG,CAAC,CAAA;QAEd,4BAA4B;QAC5B,oCAAoC;QACpC,eAAe,CAAC,OAAO,SAAS,KAAK,UAAU,CAAC,CAAC,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC,SAAS,CAAC,CAAA;QAE1E,aAAa,CAAC,OAAO,GAAG,MAAM,CAAC,UAAU,CAAC,GAAG,EAAE;YAC7C,SAAS,CAAC,KAAK,CAAC,CAAA;QAClB,CAAC,EAAE,IAAI,CAAC,CAAA;IACV,CAAC,CAAA;IAED,SAAS,CAAC,GAAG,EAAE;QACb,OAAO,GAAG,EAAE;YACV,IAAI,aAAa,CAAC,OAAO;gBAAE,YAAY,CAAC,aAAa,CAAC,OAAO,CAAC,CAAA;QAChE,CAAC,CAAA;IACH,CAAC,EAAE,EAAE,CAAC,CAAA;IAEN,OAAO,CACL,MAAC,MAAM,OAAK,SAAS,EAAE,OAAO,EAAE,WAAW,aACzC,KAAC,OAAO,IACN,SAAS,EAAC,yDAAyD,EACnE,OAAO,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,EACvB,KAAK,EAAE,EAAE,KAAK,EAAE,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,EAC9C,IAAI,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,QAAQ,EAAE,GAAG,EAAE,EACnC,mBAAmB,kBAElB,MAAM,CAAC,CAAC,CAAC,KAAC,KAAK,MAAK,aAAa,CAAG,CAAC,CAAC,CAAC,KAAC,IAAI,MAAK,WAAW,CAAG,GACxD,EACT,OAAO,QAAQ,KAAK,UAAU,CAAC,CAAC,CAAC,QAAQ,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC,CAAC,CAAC,QAAQ,IAC1D,CACV,CAAA;AACH,CAAC,CAAA","sourcesContent":["\"use client\"\n\nimport { useEffect, useRef, useState, type MouseEvent } from \"react\"\nimport { copyToClipboard, type ClipboardContent } from \"../../lib/copyToClipboard\"\nimport { Check, Copy } from \"../Icon\"\nimport { Animate } from \"../Transition\"\nimport { Button, type ButtonProps } from \"./Button\"\n\nexport type CopyButtonProps = {\n  copyValue: string | ClipboardContent | (() => string) | (() => ClipboardContent)\n  children?: React.ReactNode | ((props: { copied: boolean }) => React.ReactNode)\n} & Omit<ButtonProps, \"children\">\n\nexport const CopyButton = ({ children, copyValue, onClick, ...restProps }: CopyButtonProps) => {\n  const [copied, setCopied] = useState<boolean>(false)\n  const copiedTimeout = useRef<number | null>(null)\n\n  const handleClick = (evt: MouseEvent<HTMLButtonElement>) => {\n    // No-op when copied is true\n    if (copied) {\n      return\n    }\n\n    setCopied(true)\n    onClick?.(evt)\n\n    // Copy content to clipboard\n    // NOTE: Failures are a silent no-op\n    copyToClipboard(typeof copyValue === \"function\" ? copyValue() : copyValue)\n\n    copiedTimeout.current = window.setTimeout(() => {\n      setCopied(false)\n    }, 1300)\n  }\n\n  useEffect(() => {\n    return () => {\n      if (copiedTimeout.current) clearTimeout(copiedTimeout.current)\n    }\n  }, [])\n\n  return (\n    <Button {...restProps} onClick={handleClick}>\n      <Animate\n        className=\"w-[var(--button-icon-size)] h-[var(--button-icon-size)]\"\n        initial={{ scale: 0.6 }}\n        enter={{ scale: 1, delay: 150, duration: 300 }}\n        exit={{ scale: 0.6, duration: 150 }}\n        forceCompositeLayer\n      >\n        {copied ? <Check key=\"copied-icon\" /> : <Copy key=\"copy-icon\" />}\n      </Animate>\n      {typeof children === \"function\" ? children({ copied }) : children}\n    </Button>\n  )\n}\n"]}