{"version":3,"file":"SlotTransitionGroup.js","sourceRoot":"","sources":["../../../../src/components/Transition/SlotTransitionGroup.tsx"],"names":[],"mappings":"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","sourcesContent":["\"use client\"\n\nimport React, {\n  Children,\n  useCallback,\n  useEffect,\n  useLayoutEffect,\n  useReducer,\n  useRef,\n  useState,\n} from \"react\"\nimport { mergeRefs } from \"react-merge-refs\"\n\nimport { waitForAnimationFrame } from \"../../lib/helpers\"\n\n// (no-op) clsx removed: className is not managed at group-level for slotted children\nimport { useTimeout } from \"usehooks-ts\"\nimport getDisableAnimations from \"./getDisableAnimations\"\nimport {\n  assertSingleChildWhenRef,\n  ChildrenWithKeys,\n  computeNextRenderChildren,\n  noop,\n  useChildCallback,\n  type CallbackType,\n  type ReactElementWithKey,\n  type TransitionGroupChildCallbacks,\n} from \"./shared\"\nimport { getInitialTransitionState, transitionReducer } from \"./transitionReducer\"\n\ntype SlotTransitionGroupChildProps = {\n  component: ReactElementWithKey\n  preventMountTransition?: boolean\n  shouldRender: boolean\n  enterDuration: number\n  exitDuration: number\n  enterMountDelay?: number\n  removeChild: () => void\n  ref?: React.Ref<unknown>\n} & TransitionGroupChildCallbacks\n\nconst SlotTransitionGroupChildInner = ({\n  ref,\n  component,\n  preventMountTransition,\n  shouldRender,\n  enterDuration,\n  exitDuration,\n  removeChild,\n  onEnter,\n  onEnterActive,\n  onEnterComplete,\n  onExit,\n  onExitActive,\n  onExitComplete,\n}: SlotTransitionGroupChildProps) => {\n  const [state, dispatch] = useReducer(\n    transitionReducer,\n    getInitialTransitionState(preventMountTransition || false),\n  )\n  const preventedMountTransition = useRef<boolean>(false)\n  const elementRef = useRef<HTMLDivElement | null>(null)\n  const enterDurationRef = useRef<number>(enterDuration)\n  enterDurationRef.current = enterDuration\n  const exitDurationRef = useRef<number>(exitDuration)\n  exitDurationRef.current = exitDuration\n\n  const lastCallbackRef = useRef<CallbackType>(null as unknown as CallbackType)\n  const triggerCallback = useCallback(\n    (callbackType: CallbackType) => {\n      const element = elementRef.current\n      if (!element || callbackType === lastCallbackRef.current) {\n        return\n      }\n      lastCallbackRef.current = callbackType\n      switch (callbackType) {\n        case \"enter\":\n          onEnter(element)\n          break\n        case \"enter-active\":\n          onEnterActive(element)\n          break\n        case \"enter-complete\":\n          onEnterComplete(element)\n          break\n        case \"exit\":\n          onExit(element)\n          break\n        case \"exit-active\":\n          onExitActive(element)\n          break\n        case \"exit-complete\":\n          onExitComplete(element)\n          break\n        default:\n          callbackType satisfies never\n          break\n      }\n    },\n    [onEnter, onEnterActive, onEnterComplete, onExit, onExitActive, onExitComplete],\n  )\n\n  /**\n   * IMPORTANT: `useLayoutEffect()` is used here to avoid race conditions between new SlotTransitionGroupChild components.\n   */\n  useLayoutEffect(() => {\n    // Exit transition\n    if (!shouldRender) {\n      let exitTimeout: number | undefined\n\n      dispatch({ type: \"exit-before\" })\n      triggerCallback(\"exit\")\n\n      const cancelAnimationFrame = waitForAnimationFrame(() => {\n        dispatch({ type: \"exit-active\" })\n        triggerCallback(\"exit-active\")\n\n        exitTimeout = window.setTimeout(() => {\n          triggerCallback(\"exit-complete\")\n          removeChild()\n        }, exitDurationRef.current)\n      })\n\n      return () => {\n        cancelAnimationFrame()\n        if (exitTimeout !== undefined) clearTimeout(exitTimeout)\n      }\n    }\n\n    // Enter transition\n\n    // Check if we need to prevent this specific entering cycle\n    if (preventMountTransition && !preventedMountTransition.current) {\n      // Mark initial transition as prevented and short-circuit.\n      preventedMountTransition.current = true\n      return\n    }\n\n    let enterTimeout: number | undefined\n\n    dispatch({ type: \"enter-before\" })\n    triggerCallback(\"enter\")\n\n    const cancelAnimationFrame = waitForAnimationFrame(() => {\n      dispatch({ type: \"enter-active\" })\n      triggerCallback(\"enter-active\")\n\n      enterTimeout = window.setTimeout(() => {\n        dispatch({ type: \"done\" })\n        triggerCallback(\"enter-complete\")\n      }, enterDurationRef.current)\n    })\n\n    return () => {\n      cancelAnimationFrame()\n      if (enterTimeout !== undefined) clearTimeout(enterTimeout)\n    }\n  }, [\n    shouldRender,\n    // This value is immutable after <SlotTransitionGroup> is created, and does not change on re-renders.\n    preventMountTransition,\n    removeChild,\n    triggerCallback,\n  ])\n\n  useEffect(() => {\n    // Required for <StrictMode>\n    return () => {\n      preventedMountTransition.current = false\n    }\n  }, [])\n\n  const original = component\n\n  const mergedRef = mergeRefs<unknown>([\n    elementRef as unknown as React.Ref<unknown>,\n    ref as unknown as React.Ref<unknown>,\n    ((original as unknown as { ref?: React.Ref<unknown> }).ref ?? null) as React.Ref<unknown>,\n  ])\n\n  const nextProps = {\n    \"data-entering\": state.enter ? \"\" : undefined,\n    \"data-entering-active\": state.enterActive ? \"\" : undefined,\n    \"data-exiting\": state.exit ? \"\" : undefined,\n    \"data-exiting-active\": state.exitActive ? \"\" : undefined,\n    \"data-interrupted\": state.interrupted ? \"\" : undefined,\n    \"ref\": mergedRef,\n  }\n\n  return React.isValidElement(original) ? React.cloneElement(original, nextProps) : null\n}\n\nconst SlotTransitionGroupChild = (props: SlotTransitionGroupChildProps) => {\n  const { enterMountDelay, preventMountTransition } = props\n  const mountDelay = !preventMountTransition && enterMountDelay != null ? enterMountDelay : null\n  const [mounted, setMounted] = useState(mountDelay == null)\n  useTimeout(() => setMounted(true), mounted ? null : mountDelay)\n\n  return mounted ? <SlotTransitionGroupChildInner {...props} /> : null\n}\n\nexport type SlotTransitionGroupProps = {\n  /** Components controlled by SlotTransitionGroup rendering */\n  children: React.ReactNode\n  /** Determines the amount of time that the enter state is applied during mounting */\n  enterDuration?: number\n  /** Determines the amount of time that the exit state is applied before unmounting */\n  exitDuration?: number\n  /**\n   * Determines if children should have an enter transition applied during mounting of the group.\n   * @default true\n   */\n  preventInitialTransition?: boolean\n  /** Delay in MS to wait before mounting a child. `null` for no delay (default). */\n  enterMountDelay?: number\n  /** Render children changes immediately, bypassing transition timings */\n  disableAnimations?: boolean\n  /** Determines how new children are added to the children array */\n  insertMethod?: \"append\" | \"prepend\"\n  /** Ref for the SlotTransitionGroup (applied to the single child when possible) */\n  ref?: React.Ref<unknown>\n} & Partial<TransitionGroupChildCallbacks>\n\ntype RenderChild = {\n  component: ReactElementWithKey\n  shouldRender: boolean\n  preventMountTransition?: boolean\n  removeChild: () => void\n} & TransitionGroupChildCallbacks\n\nexport const SlotTransitionGroup = (props: SlotTransitionGroupProps) => {\n  const {\n    ref,\n    children,\n    enterDuration = 0,\n    exitDuration = 0,\n    preventInitialTransition = true,\n    enterMountDelay,\n    insertMethod = \"append\",\n    disableAnimations = getDisableAnimations(),\n  } = props\n\n  // Create stable, mutable references for all callbacks\n  const onEnter = useChildCallback(props.onEnter ?? noop)\n  const onEnterActive = useChildCallback(props.onEnterActive ?? noop)\n  const onEnterComplete = useChildCallback(props.onEnterComplete ?? noop)\n  const onExit = useChildCallback(props.onExit ?? noop)\n  const onExitActive = useChildCallback(props.onExitActive ?? noop)\n  const onExitComplete = useChildCallback(props.onExitComplete ?? noop)\n\n  // Ensure all children are provided with keys.\n  Children.forEach(children, (child) => {\n    // @ts-expect-error - We know `key` might not exist on certain types, that's why we're checking\n    if (child && !child.key) {\n      throw new Error(\"Child elements of <SlotTransitionGroup /> must include a `key`\")\n    }\n  })\n\n  const createDefaultRenderChildProps = useCallback(\n    (child: ReactElementWithKey): RenderChild => ({\n      component: child,\n      shouldRender: true,\n      removeChild: () => {\n        setRenderChildren((currentRenderChildren) =>\n          currentRenderChildren.filter((c) => child.key !== c.component.key),\n        )\n      },\n      onEnter,\n      onEnterActive,\n      onEnterComplete,\n      onExit,\n      onExitActive,\n      onExitComplete,\n    }),\n    [onEnter, onEnterActive, onEnterComplete, onExit, onExitActive, onExitComplete],\n  )\n\n  const [renderChildren, setRenderChildren] = useState<RenderChild[]>((): RenderChild[] => {\n    return ChildrenWithKeys(children).map((child) => ({\n      ...createDefaultRenderChildProps(child),\n      // Lock this value to whatever the value was on initial render of the group.\n      preventMountTransition: preventInitialTransition,\n    }))\n  })\n\n  // IMPORTANT: useLayoutEffect is required to satisfy render timings for prop updates to input elements\n  useLayoutEffect(() => {\n    setRenderChildren((currentRenderChildren): RenderChild[] => {\n      const propChildrenArray = ChildrenWithKeys(children, false, \"SlotTransitionGroup\")\n      return computeNextRenderChildren(\n        propChildrenArray,\n        currentRenderChildren,\n        createDefaultRenderChildProps,\n        insertMethod,\n      )\n    })\n  }, [children, insertMethod, createDefaultRenderChildProps])\n\n  // Prevent mistakes with forwardRef() by ensuring single child usage within the group.\n  assertSingleChildWhenRef(\"SlotTransitionGroup\", ref, Children.count(children))\n\n  if (disableAnimations) {\n    // Fast path: when animations are disabled and no ref is provided, render children as-is.\n    if (!ref) {\n      return <>{children}</>\n    }\n\n    // If a ref is provided, attach it to the (single) child by cloning.\n    return (\n      <>\n        {Children.map(children, (child) => {\n          if (!React.isValidElement(child)) return child\n          const original = child as ReactElementWithKey\n          const merged = mergeRefs<unknown>([\n            ref as unknown as React.Ref<unknown>,\n            ((original as unknown as { ref?: React.Ref<unknown> }).ref ??\n              null) as React.Ref<unknown>,\n          ])\n          const nextProps = { ref: merged }\n          return React.cloneElement(original, nextProps)\n        })}\n      </>\n    )\n  }\n\n  return (\n    <>\n      {renderChildren.map(({ component, ...restProps }) => (\n        <SlotTransitionGroupChild\n          key={component.key}\n          {...restProps}\n          component={component}\n          enterDuration={enterDuration}\n          exitDuration={exitDuration}\n          enterMountDelay={enterMountDelay}\n          ref={ref}\n        />\n      ))}\n    </>\n  )\n}\n"]}