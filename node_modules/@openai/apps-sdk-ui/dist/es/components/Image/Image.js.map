{"version":3,"file":"Image.js","sourceRoot":"","sources":["../../../../src/components/Image/Image.tsx"],"names":[],"mappings":"AAAA,YAAY,CAAA;;AAEZ,OAAO,IAAI,MAAM,MAAM,CAAA;AACvB,OAAO,EAAuB,QAAQ,EAAE,MAAM,OAAO,CAAA;AACrD,OAAO,CAAC,MAAM,oBAAoB,CAAA;AAElC,MAAM,UAAU,GAAG,IAAI,GAAG,EAAU,CAAA;AAEpC,MAAM,CAAC,MAAM,KAAK,GAAG,CAAC,EACpB,GAAG,EACH,SAAS,EACT,SAAS,GAAG,KAAK,EACjB,MAAM,EACN,OAAO,EACP,wBAAwB,GAAG,KAAK,EAChC,GAAG,SAAS,EAIb,EAAE,EAAE;IACH,MAAM,CAAC,MAAM,EAAE,SAAS,CAAC,GAAG,QAAQ,CAAC,GAAG,EAAE,CAAC,GAAG,IAAI,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAA;IACtE,MAAM,CAAC,MAAM,EAAE,SAAS,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAA;IAC3C,MAAM,cAAc,GAAG,MAAM,IAAI,CAAC,MAAM,IAAI,wBAAwB,CAAC,CAAA;IAErE,IAAI,CAAC,GAAG,IAAI,CAAC,CAAC,wBAAwB,IAAI,MAAM,CAAC,EAAE,CAAC;QAClD,OAAO,IAAI,CAAA;IACb,CAAC;IAED,OAAO,CACL,iBACM,SAAS,EACb,GAAG,EAAE,GAAG,EACR,SAAS,EAAE,IAAI,CAAC,CAAC,CAAC,KAAK,EAAE,SAAS,CAAC,EACnC,MAAM,EAAE,CAAC,GAAG,EAAE,EAAE;YACd,SAAS,CAAC,IAAI,CAAC,CAAA;YACf,UAAU,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;YACnB,MAAM,EAAE,CAAC,GAAG,CAAC,CAAA;QACf,CAAC,EACD,OAAO,EAAE,CAAC,GAAG,EAAE,EAAE;YACf,SAAS,CAAC,IAAI,CAAC,CAAA;YACf,OAAO,EAAE,CAAC,GAAG,CAAC,CAAA;QAChB,CAAC,iBACY,cAAc,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,SAAS,EAC5C,SAAS,EAAE,SAAS,GACpB,CACH,CAAA;AACH,CAAC,CAAA","sourcesContent":["\"use client\"\n\nimport clsx from \"clsx\"\nimport { type ComponentProps, useState } from \"react\"\nimport s from \"./Image.module.css\"\n\nconst loadedSrcs = new Set<string>()\n\nexport const Image = ({\n  src,\n  className,\n  draggable = false,\n  onLoad,\n  onError,\n  forceRenderAfterLoadFail = false,\n  ...restProps\n}: ComponentProps<\"img\"> & {\n  /** Force the image tag to be placed in the DOM even if load failed (resulting in broken image display) */\n  forceRenderAfterLoadFail?: boolean\n}) => {\n  const [loaded, setLoaded] = useState(() => src && loadedSrcs.has(src))\n  const [failed, setFailed] = useState(false)\n  const considerLoaded = loaded || (failed && forceRenderAfterLoadFail)\n\n  if (!src || (!forceRenderAfterLoadFail && failed)) {\n    return null\n  }\n\n  return (\n    <img\n      {...restProps}\n      src={src}\n      className={clsx(s.Image, className)}\n      onLoad={(evt) => {\n        setLoaded(true)\n        loadedSrcs.add(src)\n        onLoad?.(evt)\n      }}\n      onError={(evt) => {\n        setFailed(true)\n        onError?.(evt)\n      }}\n      data-loaded={considerLoaded ? \"\" : undefined}\n      draggable={draggable}\n    />\n  )\n}\n"]}