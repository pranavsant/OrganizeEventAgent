{"version":3,"file":"DatePicker.js","sourceRoot":"","sources":["../../../../src/components/DatePicker/DatePicker.tsx"],"names":[],"mappings":"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","sourcesContent":["\"use client\"\n\nimport { DateTime } from \"luxon\"\nimport { useMemo } from \"react\"\nimport { useLatestValue } from \"../../hooks/useLatestValue\"\nimport { isBefore } from \"../../lib/dateUtils\"\nimport { Calendar } from \"../Icon\"\nimport { Popover, type PopoverContentProps } from \"../Popover\"\nimport { SelectControl, type SelectControlProps } from \"../SelectControl\"\nimport { DateCalendar } from \"./Calendar\"\nimport { DateContext, type DateContextValue } from \"./context\"\n\nexport type DatePickerProps = {\n  /**\n   * Allow targeting the input for forms and accessibility.\n   */\n  id: string\n  /**\n   * The selected date value.\n   */\n  value: DateTime | null\n  /**\n   * Handler that is triggered when the date changes.\n   */\n  onChange: (nextValue: DateTime | null) => void\n  /**\n   * Defines the earliest selectable date (inclusive).\n   */\n  min?: DateTime\n  /**\n   * Defines the latest selectable date (inclusive).\n   */\n  max?: DateTime\n  /**\n   * The preferred side of the trigger to render against when open. Will be reversed when collisions occur.\n   * @default bottom\n   */\n  side?: PopoverContentProps[\"side\"]\n  /**\n   * The distance in pixels from the trigger.\n   * @default 8\n   */\n  sideOffset?: PopoverContentProps[\"sideOffset\"]\n  /**\n   * The preferred alignment against the trigger. May change when collisions occur.\n   * @default center\n   */\n  align?: PopoverContentProps[\"align\"]\n  /**\n   * An offset in pixels from the \"start\" or \"end\" alignment options.\n   * @default 0\n   */\n  alignOffset?: PopoverContentProps[\"alignOffset\"]\n\n  /**\n   * Disables the select visually and from interactions\n   * @default false\n   */\n  disabled?: boolean\n  /**\n   * Placeholder text for the select\n   * @default Select date...\n   */\n  placeholder?: string\n  /**\n   * Style variant for the select trigger\n   * @default outline\n   */\n  variant?: SelectControlProps[\"variant\"]\n  /**\n   * Determines if the select trigger should be a fully rounded pill shape\n   * @default false\n   */\n  pill?: boolean\n  /**\n   * Determines size of the size and spacing of the control.\n   *\n   * | 3xs     | 2xs     | xs      | sm      | md      | lg      | xl      | 2xl     | 3xl     |\n   * | ------- | ------- | ------- | ------- | ------- | ------- | ------- | ------- | ------- |\n   * | `22px`  | `24px`  | `26px`  | `28px`  | `32px`  | `36px`  | `40px`  | `44px`  | `48px`  |\n   * @default md\n   */\n  size?: SelectControlProps[\"size\"]\n  /**\n   * Icon displayed in the far right of the select trigger\n   * @default dropdown\n   */\n  dropdownIconType?: SelectControlProps[\"dropdownIconType\"]\n  /**\n   * Custom class applied to the select trigger\n   */\n  triggerClassName?: string\n  /**\n   * Display calendar icon at the start of the trigger\n   * @default true\n   */\n  triggerShowIcon?: boolean\n  /**\n   * Format of dates displayed in the trigger\n   */\n  triggerDateFormat: string\n  /**\n   * Display a clear action that allows the select to be unset.\n   * @default false\n   */\n  clearable?: boolean\n  /**\n   * Extends select to 100% of available width.\n   * @default true\n   */\n  block?: boolean\n}\n\nexport const DatePicker = (props: DatePickerProps) => {\n  const {\n    id,\n    value,\n    onChange,\n    min,\n    max,\n    side = \"bottom\",\n    sideOffset = 8,\n    align = \"center\",\n    alignOffset,\n    variant = \"outline\",\n    size = \"md\",\n    clearable = false,\n    disabled = false,\n    dropdownIconType,\n    placeholder = \"Select date...\",\n    pill = true,\n    block = false,\n    triggerClassName,\n    triggerShowIcon = true,\n    triggerDateFormat = \"MM/dd/yy\",\n  } = props\n\n  if (min && max && !isBefore(min, max)) {\n    throw new Error(\"DatePicker error: `min` date must be before the `max` date\")\n  }\n\n  // Create stable, mutable references to avoid memoization requirements from consumers\n  const onChangeRef = useLatestValue(onChange)\n\n  const store = useMemo<DateContextValue>(\n    () => ({\n      value,\n      min,\n      max,\n      variant,\n      size,\n      dropdownIconType,\n      clearable,\n      disabled,\n      placeholder,\n      block,\n      pill,\n      triggerClassName,\n      triggerShowIcon,\n      triggerDateFormat,\n      onChangeRef,\n    }),\n    [\n      value,\n      min,\n      max,\n      variant,\n      size,\n      dropdownIconType,\n      clearable,\n      disabled,\n      placeholder,\n      block,\n      pill,\n      triggerClassName,\n      triggerShowIcon,\n      triggerDateFormat,\n      onChangeRef,\n    ],\n  )\n\n  const handleClearClick = () => {\n    onChangeRef.current(null)\n  }\n\n  return (\n    <DateContext value={store}>\n      <Popover>\n        <Popover.Trigger>\n          <SelectControl\n            id={id}\n            className={triggerClassName}\n            selected={!!value}\n            variant={variant}\n            pill={pill}\n            block={block}\n            size={size}\n            disabled={disabled}\n            StartIcon={triggerShowIcon ? Calendar : undefined}\n            dropdownIconType={dropdownIconType}\n            onClearClick={clearable ? handleClearClick : undefined}\n          >\n            <span className=\"tabular-nums\">\n              {value?.toFormat(triggerDateFormat) ?? placeholder}\n            </span>\n          </SelectControl>\n        </Popover.Trigger>\n        <Popover.Content\n          minWidth={230}\n          side={side}\n          sideOffset={sideOffset}\n          align={align}\n          alignOffset={alignOffset ?? (align === \"center\" ? 0 : -5)}\n        >\n          <DateCalendar />\n        </Popover.Content>\n      </Popover>\n    </DateContext>\n  )\n}\n"]}