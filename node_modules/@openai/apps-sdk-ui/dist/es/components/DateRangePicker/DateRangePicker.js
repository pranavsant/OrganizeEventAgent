"use client";
import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { DateTime } from "luxon";
import { useMemo } from "react";
import { useLatestValue } from "../../hooks/useLatestValue";
import { isBefore } from "../../lib/dateUtils";
import { Popover } from "../Popover";
import { DateRangeCalendar, DateRangeShortcuts } from "./Calendar";
import { DateRangeContext } from "./context";
import { DateRangeTrigger } from "./Trigger";
import {} from "./types";
export const DateRangePicker = (props) => {
    const { value, onChange, min, max, maxRangeDays, shortcuts, side = "bottom", sideOffset = 8, align = "center", alignOffset, variant = "outline", size = "md", clearable = false, disabled = false, dropdownIconType, placeholder = "Select date range...", pill = true, block = false, triggerStepperUnit, triggerClassName, triggerShowIcon = true, triggerDateFormat = "MM/dd/yy", } = props;
    if (min && max && !isBefore(min, max)) {
        throw new Error("DateRangePicker error: `min` date must be before the `max` date");
    }
    // Create stable, mutable references to avoid memoization requirements from consumers
    const onChangeRef = useLatestValue(onChange);
    const store = useMemo(() => ({
        value,
        min,
        max,
        maxRangeDays,
        variant,
        size,
        dropdownIconType,
        clearable,
        disabled,
        placeholder,
        block,
        pill,
        shortcuts,
        triggerStepperUnit,
        triggerClassName,
        triggerShowIcon,
        triggerDateFormat,
        onChangeRef,
    }), [
        value,
        min,
        max,
        maxRangeDays,
        variant,
        size,
        dropdownIconType,
        clearable,
        disabled,
        placeholder,
        block,
        pill,
        shortcuts,
        triggerStepperUnit,
        triggerClassName,
        triggerShowIcon,
        triggerDateFormat,
        onChangeRef,
    ]);
    return (_jsx(DateRangeContext, { value: store, children: _jsxs(Popover, { children: [_jsx(Popover.Trigger, { children: _jsx(DateRangeTrigger, {}) }), _jsx(Popover.Content, { minWidth: 230, side: side, sideOffset: sideOffset, align: align, alignOffset: alignOffset ?? (align === "center" ? 0 : -5), children: _jsxs("div", { className: "flex", children: [_jsx(DateRangeShortcuts, { shortcuts: shortcuts }), _jsx(DateRangeCalendar, {})] }) })] }) }));
};
//# sourceMappingURL=DateRangePicker.js.map