import {
  __name
} from "./chunk-3GQAWCBQ.js";

// src/auth/probe-www-auth.ts
import { extractWWWAuthenticateParams } from "@modelcontextprotocol/sdk/client/auth.js";
async function probeAuthParams(serverUrl, fetchFn = fetch) {
  const base = serverUrl.replace(/\/$/, "");
  const url = base.endsWith("/mcp") ? base : `${base}/mcp`;
  const response = await fetchFn(url, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      jsonrpc: "2.0",
      method: "initialize",
      id: 1,
      params: {}
    })
  });
  if (response.status !== 401) {
    return {};
  }
  const { resourceMetadataUrl, scope } = extractWWWAuthenticateParams(response);
  return { resourceMetadataUrl, scope };
}
__name(probeAuthParams, "probeAuthParams");

export {
  probeAuthParams
};
