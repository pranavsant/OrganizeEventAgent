import {
  createNotification
} from "./chunk-K4JZBXZM.js";
import {
  __name
} from "./chunk-3GQAWCBQ.js";

// src/server/sessions/notifications.ts
async function sendNotificationToAll(sessions, method, params) {
  const notification = createNotification(method, params);
  for (const [sessionId, session] of sessions.entries()) {
    try {
      await session.transport.send(notification);
    } catch (error) {
      console.warn(
        `[MCP] Failed to send notification to session ${sessionId}:`,
        error
      );
    }
  }
}
__name(sendNotificationToAll, "sendNotificationToAll");
async function sendNotificationToSession(sessions, sessionId, method, params) {
  const session = sessions.get(sessionId);
  if (!session) {
    return false;
  }
  const notification = createNotification(method, params);
  try {
    await session.transport.send(notification);
    return true;
  } catch (error) {
    console.warn(
      `[MCP] Failed to send notification to session ${sessionId}:`,
      error
    );
    return false;
  }
}
__name(sendNotificationToSession, "sendNotificationToSession");

export {
  sendNotificationToAll,
  sendNotificationToSession
};
