/**
 * Base Protocol Adapter
 *
 * Abstract base class for protocol adapters that reduces duplication
 * by extracting common metadata building and CSP transformation logic.
 */
import type { ProtocolAdapter, CSPConfig } from "./types.js";
import type { UIResourceDefinition } from "../../types/resource.js";
/**
 * Extracted metadata fields from a UI resource definition
 */
interface ExtractedMetadata {
    csp?: CSPConfig;
    prefersBorder?: boolean;
    domain?: string;
    [key: string]: unknown;
}
/**
 * Abstract base adapter providing shared functionality
 *
 * Subclasses must implement:
 * - Protocol-specific metadata key naming (transformMetadataKey)
 * - CSP field transformation (transformCSPField)
 * - Metadata wrapping/namespacing (wrapResourceMetadata)
 */
export declare abstract class BaseProtocolAdapter implements ProtocolAdapter {
    abstract readonly mimeType: string;
    abstract readonly protocol: "mcp-apps" | "apps-sdk";
    /**
     * Transform a metadata key to protocol-specific format
     * e.g., "prefersBorder" → "openai/widgetPrefersBorder" (Apps SDK)
     *       "prefersBorder" → "prefersBorder" (MCP Apps)
     */
    protected abstract transformMetadataKey(key: string): string;
    /**
     * Transform a CSP field name to protocol-specific format
     * e.g., "connectDomains" → "connect_domains" (Apps SDK)
     *       "connectDomains" → "connectDomains" (MCP Apps)
     */
    protected abstract transformCSPField(field: string): string;
    /**
     * Wrap metadata for protocol-specific namespacing
     * e.g., { csp: ... } → { "openai/widgetCSP": ... } (Apps SDK)
     *       { csp: ... } → { ui: { csp: ... } } (MCP Apps)
     */
    protected abstract wrapResourceMetadata(meta: Record<string, unknown>): Record<string, unknown>;
    /**
     * Get protocol-specific metadata source field name
     * e.g., "appsSdkMetadata" for Apps SDK, undefined for MCP Apps
     */
    protected abstract getProtocolMetadataField(): "appsSdkMetadata" | undefined;
    /**
     * Build resource metadata using shared logic
     */
    buildResourceMetadata(definition: UIResourceDefinition): {
        mimeType: string;
        _meta?: Record<string, unknown>;
    };
    /**
     * Extract metadata from definition, checking both unified and protocol-specific sources
     */
    protected extractMetadata(definition: UIResourceDefinition): ExtractedMetadata;
    /**
     * Transform extracted metadata to protocol-specific format
     */
    protected transformExtractedMetadata(meta: ExtractedMetadata): Record<string, unknown>;
    /**
     * Transform CSP config using protocol-specific field naming
     */
    protected transformCSPBase(csp: CSPConfig): Record<string, unknown>;
    abstract buildToolMetadata(definition: UIResourceDefinition, uri: string): Record<string, unknown>;
}
export {};
//# sourceMappingURL=base.d.ts.map