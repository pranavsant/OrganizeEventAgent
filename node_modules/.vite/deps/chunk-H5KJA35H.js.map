{
  "version": 3,
  "sources": ["../../mcp-use/dist/chunk-JU7W27UC.js"],
  "sourcesContent": ["import {\n  Logger\n} from \"./chunk-QWQYAQCK.js\";\nimport {\n  __name\n} from \"./chunk-3GQAWCBQ.js\";\n\n// src/react/rpc-logger.ts\nvar logger = Logger.get(\"RpcLogger\");\nvar RpcLogStore = class {\n  static {\n    __name(this, \"RpcLogStore\");\n  }\n  logs = [];\n  listeners = /* @__PURE__ */ new Set();\n  maxLogs = 1e3;\n  publish(entry) {\n    logger.debug(\n      \"[RPC Logger] Publishing log:\",\n      entry.direction,\n      entry.serverId,\n      entry.message?.method\n    );\n    this.logs.push(entry);\n    if (this.logs.length > this.maxLogs) {\n      this.logs = this.logs.slice(-this.maxLogs);\n    }\n    logger.debug(\n      \"[RPC Logger] Total logs:\",\n      this.logs.length,\n      \"Listeners:\",\n      this.listeners.size\n    );\n    this.listeners.forEach((listener) => {\n      try {\n        listener(entry);\n      } catch (err) {\n        logger.error(\"[RPC Logger] Listener error:\", err);\n      }\n    });\n  }\n  subscribe(listener) {\n    this.listeners.add(listener);\n    return () => this.listeners.delete(listener);\n  }\n  getLogsForServer(serverId) {\n    return this.logs.filter((log) => log.serverId === serverId);\n  }\n  getAllLogs() {\n    return [...this.logs];\n  }\n  clear(serverId) {\n    if (serverId) {\n      this.logs = this.logs.filter((log) => log.serverId !== serverId);\n    } else {\n      this.logs = [];\n    }\n  }\n};\nvar rpcLogStore = new RpcLogStore();\nfunction getRpcLogs(serverId) {\n  return rpcLogStore.getLogsForServer(serverId);\n}\n__name(getRpcLogs, \"getRpcLogs\");\nfunction getAllRpcLogs() {\n  return rpcLogStore.getAllLogs();\n}\n__name(getAllRpcLogs, \"getAllRpcLogs\");\nfunction subscribeToRpcLogs(listener) {\n  return rpcLogStore.subscribe(listener);\n}\n__name(subscribeToRpcLogs, \"subscribeToRpcLogs\");\nfunction clearRpcLogs(serverId) {\n  rpcLogStore.clear(serverId);\n}\n__name(clearRpcLogs, \"clearRpcLogs\");\nfunction wrapTransportForLogging(transport, serverId) {\n  class LoggingTransport {\n    constructor(inner) {\n      this.inner = inner;\n      this.inner.onmessage = (message, extra) => {\n        rpcLogStore.publish({\n          serverId,\n          direction: \"receive\",\n          timestamp: (/* @__PURE__ */ new Date()).toISOString(),\n          message\n        });\n        this.onmessage?.(message, extra);\n      };\n      this.inner.onclose = () => {\n        this.onclose?.();\n      };\n      this.inner.onerror = (error) => {\n        this.onerror?.(error);\n      };\n    }\n    static {\n      __name(this, \"LoggingTransport\");\n    }\n    onclose;\n    onerror;\n    onmessage;\n    async start() {\n      if (typeof this.inner.start === \"function\") {\n        await this.inner.start();\n      }\n    }\n    async send(message, options) {\n      rpcLogStore.publish({\n        serverId,\n        direction: \"send\",\n        timestamp: (/* @__PURE__ */ new Date()).toISOString(),\n        message\n      });\n      await this.inner.send(message, options);\n    }\n    async close() {\n      await this.inner.close();\n    }\n    get sessionId() {\n      return this.inner.sessionId;\n    }\n    setProtocolVersion(version) {\n      if (typeof this.inner.setProtocolVersion === \"function\") {\n        this.inner.setProtocolVersion(version);\n      }\n    }\n  }\n  return new LoggingTransport(transport);\n}\n__name(wrapTransportForLogging, \"wrapTransportForLogging\");\n\nexport {\n  getRpcLogs,\n  getAllRpcLogs,\n  subscribeToRpcLogs,\n  clearRpcLogs,\n  wrapTransportForLogging\n};\n"],
  "mappings": ";;;;;;AAQA,IAAI,SAAS,OAAO,IAAI,WAAW;AARnC;AASA,IAAI,eAAc,WAAM;AAAA,EAItB,OAAO,CAAC;AAAA,EACR,YAA4B,oBAAI,IAAI;AAAA,EACpC,UAAU;AAAA,EACV,QAAQ,OAAO;AACb,WAAO;AAAA,MACL;AAAA,MACA,MAAM;AAAA,MACN,MAAM;AAAA,MACN,MAAM,SAAS;AAAA,IACjB;AACA,SAAK,KAAK,KAAK,KAAK;AACpB,QAAI,KAAK,KAAK,SAAS,KAAK,SAAS;AACnC,WAAK,OAAO,KAAK,KAAK,MAAM,CAAC,KAAK,OAAO;AAAA,IAC3C;AACA,WAAO;AAAA,MACL;AAAA,MACA,KAAK,KAAK;AAAA,MACV;AAAA,MACA,KAAK,UAAU;AAAA,IACjB;AACA,SAAK,UAAU,QAAQ,CAAC,aAAa;AACnC,UAAI;AACF,iBAAS,KAAK;AAAA,MAChB,SAAS,KAAK;AACZ,eAAO,MAAM,gCAAgC,GAAG;AAAA,MAClD;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EACA,UAAU,UAAU;AAClB,SAAK,UAAU,IAAI,QAAQ;AAC3B,WAAO,MAAM,KAAK,UAAU,OAAO,QAAQ;AAAA,EAC7C;AAAA,EACA,iBAAiB,UAAU;AACzB,WAAO,KAAK,KAAK,OAAO,CAAC,QAAQ,IAAI,aAAa,QAAQ;AAAA,EAC5D;AAAA,EACA,aAAa;AACX,WAAO,CAAC,GAAG,KAAK,IAAI;AAAA,EACtB;AAAA,EACA,MAAM,UAAU;AACd,QAAI,UAAU;AACZ,WAAK,OAAO,KAAK,KAAK,OAAO,CAAC,QAAQ,IAAI,aAAa,QAAQ;AAAA,IACjE,OAAO;AACL,WAAK,OAAO,CAAC;AAAA,IACf;AAAA,EACF;AACF,GA/CI,OAAO,IAAM,aAAa,GAFZ;AAkDlB,IAAI,cAAc,IAAI,YAAY;AAClC,SAAS,WAAW,UAAU;AAC5B,SAAO,YAAY,iBAAiB,QAAQ;AAC9C;AACA,OAAO,YAAY,YAAY;AAC/B,SAAS,gBAAgB;AACvB,SAAO,YAAY,WAAW;AAChC;AACA,OAAO,eAAe,eAAe;AACrC,SAAS,mBAAmB,UAAU;AACpC,SAAO,YAAY,UAAU,QAAQ;AACvC;AACA,OAAO,oBAAoB,oBAAoB;AAC/C,SAAS,aAAa,UAAU;AAC9B,cAAY,MAAM,QAAQ;AAC5B;AACA,OAAO,cAAc,cAAc;AACnC,SAAS,wBAAwB,WAAW,UAAU;AACpD,QAAM,oBAAN,MAAM,kBAAiB;AAAA,IACrB,YAAY,OAAO;AACjB,WAAK,QAAQ;AACb,WAAK,MAAM,YAAY,CAAC,SAAS,UAAU;AACzC,oBAAY,QAAQ;AAAA,UAClB;AAAA,UACA,WAAW;AAAA,UACX,YAA4B,oBAAI,KAAK,GAAG,YAAY;AAAA,UACpD;AAAA,QACF,CAAC;AACD,aAAK,YAAY,SAAS,KAAK;AAAA,MACjC;AACA,WAAK,MAAM,UAAU,MAAM;AACzB,aAAK,UAAU;AAAA,MACjB;AACA,WAAK,MAAM,UAAU,CAAC,UAAU;AAC9B,aAAK,UAAU,KAAK;AAAA,MACtB;AAAA,IACF;AAAA,IAIA;AAAA,IACA;AAAA,IACA;AAAA,IACA,MAAM,QAAQ;AACZ,UAAI,OAAO,KAAK,MAAM,UAAU,YAAY;AAC1C,cAAM,KAAK,MAAM,MAAM;AAAA,MACzB;AAAA,IACF;AAAA,IACA,MAAM,KAAK,SAAS,SAAS;AAC3B,kBAAY,QAAQ;AAAA,QAClB;AAAA,QACA,WAAW;AAAA,QACX,YAA4B,oBAAI,KAAK,GAAG,YAAY;AAAA,QACpD;AAAA,MACF,CAAC;AACD,YAAM,KAAK,MAAM,KAAK,SAAS,OAAO;AAAA,IACxC;AAAA,IACA,MAAM,QAAQ;AACZ,YAAM,KAAK,MAAM,MAAM;AAAA,IACzB;AAAA,IACA,IAAI,YAAY;AACd,aAAO,KAAK,MAAM;AAAA,IACpB;AAAA,IACA,mBAAmB,SAAS;AAC1B,UAAI,OAAO,KAAK,MAAM,uBAAuB,YAAY;AACvD,aAAK,MAAM,mBAAmB,OAAO;AAAA,MACvC;AAAA,IACF;AAAA,EACF;AA9BI,SAAO,mBAAM,kBAAkB;AApBnC,MAAM,mBAAN;AAmDA,SAAO,IAAI,iBAAiB,SAAS;AACvC;AACA,OAAO,yBAAyB,yBAAyB;",
  "names": []
}
