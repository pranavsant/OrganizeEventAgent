const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-JfcYhvKH.js","assets/index-B9xgKKTO.js","assets/index-Br5Lp-nB.css","assets/core-lM8H9z0c.js","assets/1c-DOTL_Doy.js","assets/abnf-BjLV93yi.js","assets/accesslog-GJv3YBrF.js","assets/actionscript-DoqfywO9.js","assets/ada-RUsuGPJi.js","assets/angelscript-BdZ1b0rs.js","assets/apache-CsbpFlqC.js","assets/applescript-kY8OmlKB.js","assets/arcade-BmMgc7_g.js","assets/arduino-pNuu6z4_.js","assets/armasm-nKvy_iDO.js","assets/xml-BXh47oPk.js","assets/asciidoc-B_fy0kBa.js","assets/aspectj-DvN9ZbSj.js","assets/autohotkey-CZG2ssCb.js","assets/autoit-DXMOl7Fd.js","assets/avrasm-Ba2EQvoc.js","assets/awk-Cb-RiGP0.js","assets/axapta-J1eBZbig.js","assets/bash-CN_VnC_Q.js","assets/basic-Bug0UzDW.js","assets/bnf-DZMdTSN9.js","assets/brainfuck-BYywhCpy.js","assets/c-like-BLVencsc.js","assets/c-DkSi4Vcz.js","assets/cal-Bok_ig3y.js","assets/capnproto-uQZ1jOWw.js","assets/ceylon-CLrvJLwU.js","assets/clean-jkCpP5TC.js","assets/clojure--pYedOFI.js","assets/clojure-repl-Cp-cHE39.js","assets/cmake-CKl4Nywn.js","assets/coffeescript-B5dBcvVG.js","assets/coq-DJA4mjuN.js","assets/cos-DckhWT6g.js","assets/cpp-B87jAeCB.js","assets/crmsh-Dc9XdWBP.js","assets/crystal-AiyYbKLq.js","assets/csharp-GDFduacm.js","assets/csp-DK1-V7Db.js","assets/css-OjpDdnLT.js","assets/d-Cj7t0knZ.js","assets/markdown-Bnpjmjdr.js","assets/dart-vlk_R7L2.js","assets/delphi-oHShnxHc.js","assets/diff-CMHzeABH.js","assets/django-BJHTgcPT.js","assets/dns-B8Qm8HuY.js","assets/dockerfile-NjbpBWJ2.js","assets/dos-C6ygE4Ei.js","assets/dsconfig-BetjSZ3D.js","assets/dts-BOH5TDT-.js","assets/dust-DsfNS0hI.js","assets/ebnf-BGmXUujk.js","assets/elixir-CYXbd3jG.js","assets/elm-CJCwRLzK.js","assets/ruby-U0BYPmFB.js","assets/erb-CANFiuzW.js","assets/erlang-repl-C-WvLaul.js","assets/erlang-CYUnCrk0.js","assets/excel-DPetn2vF.js","assets/fix-D7T_oQ9O.js","assets/flix-DWvLG6E_.js","assets/fortran-Cbh4tV_m.js","assets/fsharp-BarQNxPT.js","assets/gams-BVueaFMy.js","assets/gauss-DMVDwWC_.js","assets/gcode-B80Z_LSc.js","assets/gherkin-DwdfqIxg.js","assets/glsl-DFuaITlO.js","assets/gml-sg8D2Hoc.js","assets/go-DOIHECmn.js","assets/golo-5y-cAlg7.js","assets/gradle-C5LRK4lY.js","assets/groovy-CqO0xXbN.js","assets/haml-Du0d9Qpu.js","assets/handlebars-BqpMwd25.js","assets/haskell-BSgKG0fA.js","assets/haxe-Bbxdab9d.js","assets/hsp-BfO253pz.js","assets/htmlbars-BdupgdwA.js","assets/http-FG-1bz0S.js","assets/hy-CljtLrIB.js","assets/inform7-CKh91FfW.js","assets/ini-CUN5Fz6a.js","assets/irpf90-BGwK5upn.js","assets/isbl-BW2-1xqY.js","assets/java-BopHZ59q.js","assets/javascript-Bcajz3YC.js","assets/jboss-cli-7Bb2wtKY.js","assets/json-_cGKMkqV.js","assets/julia-CflsGA1_.js","assets/julia-repl-DTkCRO_Z.js","assets/kotlin-DSmpQSGN.js","assets/lasso-BciudTQ1.js","assets/latex-CHdb8PhR.js","assets/ldif-jBEfafs_.js","assets/leaf-CQphRTnn.js","assets/less-D0Ccux41.js","assets/lisp-DfrNO5te.js","assets/livecodeserver-WU_wnUq8.js","assets/livescript-oQhn4lAX.js","assets/llvm-Ctq8Ea1M.js","assets/lsl-CZ-92Osz.js","assets/lua-CtuzIFQ2.js","assets/makefile-CUBjRDBz.js","assets/mathematica-DMjmGOFL.js","assets/matlab-bMP2hmJA.js","assets/maxima-CiGgQtRy.js","assets/mel-BKEdQ-Ac.js","assets/mercury-Cg7tRNfI.js","assets/mipsasm-CNyeTk3S.js","assets/mizar-BICf15Zj.js","assets/perl-CG48H2Tk.js","assets/mojolicious-DiD_1YV0.js","assets/monkey-D6kono4g.js","assets/moonscript-Ba-Tqbk8.js","assets/n1ql-AxtiJSd2.js","assets/nginx-DwELR1Kc.js","assets/nim-WLvfBExD.js","assets/nix-CYCtYL9u.js","assets/node-repl-DFkgLtXM.js","assets/nsis-DuGBnzB5.js","assets/objectivec-DaSEGJ40.js","assets/ocaml-Lke8W5fZ.js","assets/openscad-BUF8N3i5.js","assets/oxygene-CNTFR9M0.js","assets/parser3-DkkG33l8.js","assets/pf-B8CGBekM.js","assets/pgsql-C72BsFGV.js","assets/php-BnOcpMux.js","assets/php-template-BQLZ6iCT.js","assets/plaintext-TgN34U_P.js","assets/pony-D2s0nSMG.js","assets/powershell-CwBe08EC.js","assets/processing-83OAnlCi.js","assets/profile-Co0NG88S.js","assets/prolog-2Rxvo3d_.js","assets/properties-BZrOFGmF.js","assets/protobuf-Cc7EZO5Y.js","assets/puppet-CJr7B09H.js","assets/purebasic-lmx8MMfp.js","assets/python-BctvjIbZ.js","assets/python-repl-f_19wJYw.js","assets/q-ClVUhk4N.js","assets/qml-WV58KNua.js","assets/r-CnigUbQl.js","assets/reasonml-D-8_Lf63.js","assets/rib-DhxZj9fV.js","assets/roboconf-C9_f8BAb.js","assets/routeros-0VVpPsA4.js","assets/rsl-B-_wRvQZ.js","assets/ruleslanguage-C6IDQ_id.js","assets/rust-ByoeQ5jb.js","assets/sas-DzgwSrpf.js","assets/scala-Dzt-MscJ.js","assets/scheme-D7X8lENz.js","assets/scilab-BDRgLrmm.js","assets/scss-hD3K75LU.js","assets/shell-DtjSgbG3.js","assets/smali-Dz834AtK.js","assets/smalltalk-bRqiTIeV.js","assets/sml-BZgrt2qR.js","assets/sqf-BhMgSC-9.js","assets/sql_more-CiUnQFCB.js","assets/sql-D9a3dnuY.js","assets/stan-M2mdTSOp.js","assets/stata-CBjVxKhA.js","assets/step21-PEp2FbgJ.js","assets/stylus-KpBYw7lY.js","assets/subunit-CIiHPJOz.js","assets/swift-l8Sedkw9.js","assets/taggerscript-B2nhDpZI.js","assets/yaml-BKYJIuvD.js","assets/tap-Cz77FvlH.js","assets/tcl-Cw1k2FtN.js","assets/thrift-CAwZw_2g.js","assets/tp-BoGwmalK.js","assets/twig-1xgj4vMV.js","assets/typescript-C925WkhK.js","assets/vala-8Htn2qvX.js","assets/vbnet-CsYNC8ZV.js","assets/vbscript-C6WdSq9e.js","assets/vbscript-html-CBkOqIaC.js","assets/verilog-DSo68DT-.js","assets/vhdl-C1F4x3vF.js","assets/vim-CNd_h5kc.js","assets/x86asm-BXgEvW-J.js","assets/xl-sMilxJ95.js","assets/xquery-GsrDavrd.js","assets/zephir-DZzC3J8X.js"])))=>i.map(i=>d[i]);
import{t as a,u as k}from"./index-B9xgKKTO.js";var y=null,L=null,O=null,J=!1,V=typeof process<"u"&&process.versions?.node;(async()=>{if(V)try{O=(await k(()=>import("./util-QmrWvrtn.js"),[])).stripVTControlCharacters}catch{}try{y=(await k(()=>import("./index-JiKw9JSs.js"),[])).default}catch{}try{L=(await k(()=>import("./index-JfcYhvKH.js").then(e=>e.i),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194]))).highlight}catch{}V&&(!y||!L)&&(J||(J=!0,console.warn(`
âœ¨ For enhanced console output with colors and syntax highlighting, install:

  npm install chalk cli-highlight
  # or
  pnpm add chalk cli-highlight
`)))})();var B=process.stdout.columns||120,p={gray:a(t=>y?.gray(t)??t,"gray"),bold:{white:a(t=>y?.bold?.white(t)??t,"white")},bgGray:a(t=>y?.bgGray(t)??t,"bgGray"),cyan:a(t=>y?.cyan(t)??t,"cyan"),dim:a(t=>y?.dim(t)??t,"dim"),red:a(t=>y?.red(t)??t,"red"),green:a(t=>y?.green(t)??t,"green")};function D(t,e){if(!L)return t;try{return L(t,{language:e??"javascript",ignoreIllegals:!0})}catch{return t}}a(D,"highlightCode");function w(t){return O?O(t):t.replace(/\x1b\[[0-9;]*m/g,"")}a(w,"stripAnsi");function G(t,e){if(w(t).length<=e)return[t];const o=[];let r=0,s="",c=0;for(;c<t.length;){const i=t[c];if(i==="\x1B"){let n=i;for(c++;c<t.length;){const d=t[c];if(n+=d,c++,d==="m")break}s+=n;continue}s+=i,r++,c++,r>=e&&(o.push(s),s="",r=0)}return s&&o.push(s),o}a(G,"wrapAnsiLine");function g(t,e,l,o=!1){const r=B;let s=t;if(l)try{s=D(t,l)}catch{}const c=s.split(`
`).flatMap(i=>G(i,r-4));if(console.log(p.gray("â”Œ"+"â”€".repeat(r-2)+"â”")),e){const i=w(e),n=`${e} `,d=Math.max(0,r-4-i.length-2);console.log(p.gray("â”‚ ")+p.bold.white(n)+" ".repeat(d)+p.gray(" â”‚")),console.log(p.gray("â”œ"+"â”€".repeat(r-2)+"â”¤"))}c.forEach(i=>{const n=w(i),d=Math.max(0,r-4-n.length),$=o?p.bgGray(i+" ".repeat(d)):i+" ".repeat(d);console.log(p.gray("â”‚ ")+$+p.gray(" â”‚"))}),console.log(p.gray("â””"+"â”€".repeat(r-2)+"â”˜"))}a(g,"printBox");function H(t){if(typeof t=="object"&&t!==null&&"code"in t){const e=t;return typeof e.code=="string"?e.code:null}return null}a(H,"extractCodeFromToolInput");function I(t){if(typeof t!="object"||t===null)return!1;const e=t;return"result"in e&&"logs"in e&&Array.isArray(e.logs)&&"execution_time"in e&&typeof e.execution_time=="number"&&"error"in e&&(typeof e.error=="string"||e.error===null)}a(I,"isExecuteCodeResult");function N(t){try{if(typeof t=="string"){const e=JSON.parse(t);if(I(e))return e}if(I(t))return t}catch{}return null}a(N,"parseExecuteCodeResult");function _(t){return t==null?"null":typeof t=="object"?JSON.stringify(t,null,2):String(t)}a(_,"renderContent");function W(t){if(typeof t=="object"&&t!==null&&"input"in t){const e=t;if(typeof e.input=="string")try{return JSON.parse(e.input)}catch{return e.input}}return t}a(W,"unwrapToolInput");function q(t){const e=t.name||"unknown";let l=t.data?.input||{};l=W(l);const o=H(l);if(o){g(o,`${e} - input`,"javascript",!1);const r={...l};delete r.code,Object.keys(r).length>0&&g(_(r),"Other Parameters","json",!1)}else g(_(l),`${e} - input`,"json",!1)}a(q,"handleToolStart");function K(t){try{if(typeof t=="object"&&t!==null&&"name"in t&&"content"in t){const e=t,l=(typeof e.name=="string"?e.name:null)||"unknown",r=e.lc_kwargs?.status||e.status||"unknown";let s=e.content;if(typeof s=="string")try{s=JSON.parse(s)}catch{}return{toolName:l,status:r,content:s}}}catch{}return null}a(K,"extractToolMessageContent");function P(t,e,l){const o=[];if(e&&(e.total_tools!==void 0&&o.push(`Total tools: ${e.total_tools}`),e.namespaces&&e.namespaces.length>0&&o.push(`Namespaces: ${e.namespaces.join(", ")}`),e.result_count!==void 0&&o.push(`Results: ${e.result_count}`)),!Array.isArray(t)||t.length===0){const i=l?`No tools found for query "${l}"`:"(no tools found)";return o.length>0?`${o.join(`
`)}

${i}`:i}const r={};for(const i of t){const n=i.server||"unknown";r[n]||(r[n]=[]),r[n].push(i)}const s=[];e&&(e.total_tools!==void 0&&s.push(`Total tools: ${e.total_tools}`),e.namespaces&&e.namespaces.length>0&&s.push(`Namespaces: ${e.namespaces.join(", ")}`),e.result_count!==void 0&&s.push(`Results: ${e.result_count}`),s.length>0&&s.push(""));const c=Object.keys(r).sort();for(let i=0;i<c.length;i++){const n=c[i],d=r[n],$=i===c.length-1,m=$?"â””â”€":"â”œâ”€";s.push(`${m} ${p.cyan(n)} (${d.length} tools)`);for(let j=0;j<d.length;j++){const A=d[j],R=j===d.length-1,E=$?"  ":"â”‚ ",u=`${E}${R?"â””â”€":"â”œâ”€"} ${A.name}`;if(s.push(u),A.description){const h=`${E}${R?"   ":"â”‚  "}`,C=w(h).length,v=Math.max(40,B-C-4),T=A.description.split(/(\s+)/),b=[];let x="";for(const M of T){const F=x+M;w(F).length<=v?x=F:(x&&b.push(x.trimEnd()),x=M.trimStart())}x&&b.push(x.trimEnd());for(const M of b)s.push(`${h}${p.dim(M)}`)}}}return s.join(`
`)}a(P,"formatSearchToolsAsTree");function z(t){const e=t.data?.output,l=K(e);if(l){const{toolName:c,status:i,content:n}=l;if(c==="execute_code"){let S=n;if(typeof n=="object"&&n!==null&&"content"in n){const f=n.content;Array.isArray(f)&&f.length>0&&f[0].type==="text"&&f[0].text&&(S=f[0].text)}const u=N(S);if(u){const h=`${u.execution_time?Math.round(u.execution_time*1e3):0}ms`,v=u.error!==null&&u.error!==void 0&&u.error!==""?p.red("error"):p.green("success"),T=`${c} - ${v} - ${h}`;if(u.result!==null&&u.result!==void 0){const b=_(u.result),x=typeof u.result=="object"?"json":void 0;g(b,T,x,!1)}else g("(no result)",T,void 0,!1);u.logs&&u.logs.length>0&&g(u.logs.join(`
`),"Logs",void 0,!1),u.error&&g(u.error,p.red("Error"),void 0,!1);return}}if(c==="search_tools"){const u=t.data?.input?.query;let f=n;if(typeof n=="object"&&n!==null&&!Array.isArray(n)&&"content"in n){const h=n.content;if(Array.isArray(h)&&h.length>0&&h[0].type==="text"&&h[0].text)try{f=JSON.parse(h[0].text)}catch{f=h[0].text}}if(typeof f=="object"&&f!==null&&!Array.isArray(f)&&"results"in f&&Array.isArray(f.results)){const h=f.results,v=f.meta,T=P(h,v,u),x=`${i==="success"?y.green("Success"):y.red("Error")}: ${c} - Result`;g(T,x,void 0,!1);return}if(Array.isArray(f)){const h=P(f,void 0,u),v=`${i==="success"?y.green("Success"):y.red("Error")}: ${c} - Result`;g(h,v,void 0,!1);return}}const d=typeof n=="object"&&n!==null?n:null,$=d&&"isError"in d&&d.isError===!0||i==="error";let m=n;typeof n=="object"&&n!==null&&"content"in n&&(m=n.content,Array.isArray(m)&&m.length>0&&m[0].type==="text"&&m[0].text&&(m=m[0].text));const j=_(m),A=typeof m=="object"?"json":void 0,E=`${i==="success"?p.green("Success"):$?p.red("Error"):"Result"}: ${c} - Result`;g(j,E,A,!1);return}const o=N(e);if(o){const i=`${o.execution_time?Math.round(o.execution_time*1e3):0}ms`;if(o.result!==null&&o.result!==void 0){const n=_(o.result),d=typeof o.result=="object"?"json":void 0;g(n,`Result - ${i}`,d,!1)}o.logs&&o.logs.length>0&&g(o.logs.join(`
`),"Logs",void 0,!1),o.error&&g(o.error,p.red("Error"),void 0,!1);return}const r=_(e);g(r,"Result",typeof e=="object"?"json":void 0,!1)}a(z,"handleToolEnd");async function*Q(t){let e="",l=!0,o=!1;for await(const r of t){if(r.event==="on_tool_start")o&&(process.stdout.write(`
`),o=!1,l=!0),q(r);else if(r.event==="on_tool_end")z(r);else if(r.event==="on_chat_model_stream"&&r.data?.chunk?.text){const s=r.data.chunk.text;typeof s=="string"&&s.length>0&&(l&&(process.stdout.write(`
ðŸ¤– `),l=!1),process.stdout.write(s),e+=s,o=!0)}yield}return e}a(Q,"prettyStreamEvents");export{H as extractCodeFromToolInput,K as extractToolMessageContent,P as formatSearchToolsAsTree,z as handleToolEnd,q as handleToolStart,N as parseExecuteCodeResult,Q as prettyStreamEvents,g as printBox,_ as renderContent,W as unwrapToolInput};
