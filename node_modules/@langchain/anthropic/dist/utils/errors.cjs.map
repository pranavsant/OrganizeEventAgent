{"version":3,"file":"errors.cjs","names":["ContextOverflowError"],"sources":["../../src/utils/errors.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable no-param-reassign */\n\nimport { ContextOverflowError } from \"@langchain/core/errors\";\n\n// Duplicate of core\n// TODO: Remove once we stop supporting 0.2.x core versions\nexport type LangChainErrorCodes =\n  | \"CONTEXT_OVERFLOW\"\n  | \"INVALID_PROMPT_INPUT\"\n  | \"INVALID_TOOL_RESULTS\"\n  | \"MESSAGE_COERCION_FAILURE\"\n  | \"MODEL_AUTHENTICATION\"\n  | \"MODEL_NOT_FOUND\"\n  | \"MODEL_RATE_LIMIT\"\n  | \"OUTPUT_PARSING_FAILURE\";\n\nexport function addLangChainErrorFields(\n  error: any,\n  lc_error_code: LangChainErrorCodes\n) {\n  (error as any).lc_error_code = lc_error_code;\n  error.message = `${error.message}\\n\\nTroubleshooting URL: https://docs.langchain.com/oss/javascript/langchain/errors/${lc_error_code}/\\n`;\n  return error;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function wrapAnthropicClientError(e: any) {\n  let error;\n  if (\n    e.status === 400 &&\n    typeof e.message === \"string\" &&\n    e.message.includes(\"prompt is too long\")\n  ) {\n    error = ContextOverflowError.fromError(e);\n  } else if (e.status === 400 && e.message.includes(\"tool\")) {\n    error = addLangChainErrorFields(e, \"INVALID_TOOL_RESULTS\");\n  } else if (e.status === 401) {\n    error = addLangChainErrorFields(e, \"MODEL_AUTHENTICATION\");\n  } else if (e.status === 404) {\n    error = addLangChainErrorFields(e, \"MODEL_NOT_FOUND\");\n  } else if (e.status === 429) {\n    error = addLangChainErrorFields(e, \"MODEL_RATE_LIMIT\");\n  } else {\n    error = e;\n  }\n  return error;\n}\n"],"mappings":";;;;AAiBA,SAAgB,wBACd,OACA,eACA;AACA,CAAC,MAAc,gBAAgB;AAC/B,OAAM,UAAU,GAAG,MAAM,QAAQ,sFAAsF,cAAc;AACrI,QAAO;;AAIT,SAAgB,yBAAyB,GAAQ;CAC/C,IAAI;AACJ,KACE,EAAE,WAAW,OACb,OAAO,EAAE,YAAY,YACrB,EAAE,QAAQ,SAAS,qBAAqB,CAExC,SAAQA,4CAAqB,UAAU,EAAE;UAChC,EAAE,WAAW,OAAO,EAAE,QAAQ,SAAS,OAAO,CACvD,SAAQ,wBAAwB,GAAG,uBAAuB;UACjD,EAAE,WAAW,IACtB,SAAQ,wBAAwB,GAAG,uBAAuB;UACjD,EAAE,WAAW,IACtB,SAAQ,wBAAwB,GAAG,kBAAkB;UAC5C,EAAE,WAAW,IACtB,SAAQ,wBAAwB,GAAG,mBAAmB;KAEtD,SAAQ;AAEV,QAAO"}